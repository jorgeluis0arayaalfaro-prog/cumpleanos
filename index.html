<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cumplea√±os del Equipo CCF</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <link href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(to top, #c1e1ff 0%, #f0f9ff 100%);
      font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      overflow-x: hidden;
    }

    .universal-emoji {
      font-family: 'Noto Color Emoji', 'Apple Color Emoji', 'Segoe UI Emoji', sans-serif !important;
    }

    h1, h2 {
      color: #0b5ed7;
      font-weight: bold;
    }

    h1 {
      text-align: center;
      margin-bottom: 2rem;
    }

    .birthday-card {
      border: none;
      border-radius: 1rem;
      cursor: pointer;
      transition: all 0.25s ease;
      background: #eaeff2;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .birthday-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      background: #ffffff;
    }

    .next-birthday-card {
      border: 2px solid #0b5ed7;
      animation: pulseAccent 2s infinite;
    }

    @keyframes pulseAccent {
      0% { box-shadow: 0 0 0 0 rgba(11, 94, 215, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(11, 94, 215, 0); }
      100% { box-shadow: 0 0 0 0 rgba(11, 94, 215, 0); }
    }

    .today-birthday .card-body {
      background-color: #d8f9e0;
      border-radius: 0 0 1rem 1rem;
    }

    /* -------------------------------------
       NUEVAS ANIMACIONES PARA EL MODAL (EL EFECTO "WOW")
       ------------------------------------- */
    .modal-content {
      border-radius: 1.5rem; 
      background-color: white; 
      border: none;
    }

    /* 1. El Emoji crece desde cero hasta su tama√±o final */
    .emoji-grow-fx {
      display: inline-block;
      animation: popGrow 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }
    @keyframes popGrow {
      0% { transform: scale(0); opacity: 0; }
      70% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }

    /* 2. El Texto aparece suavemente (Fade-in) SIN MOVERSE */
    .details-fade-fx {
      opacity: 0;
      animation: simpleFade 0.6s ease forwards;
      animation-delay: 0.5s; /* Espera medio segundo a que el emoji crezca */
    }
    @keyframes simpleFade {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }


    /* -------------------------------------
       ANIMACIONES DE MOVIMIENTO Y AURA DE LAS TARJETAS
       ------------------------------------- */
    .icon-base {
      font-size: 1.5rem;
      margin-right: 5px;
      vertical-align: middle;
      display: inline-block;
    }

    .anim-float { animation: floatAnim 3s ease-in-out infinite; }
    @keyframes floatAnim {
      0%, 100% { transform: translateY(0); filter: drop-shadow(0 0 2px var(--aura-color, gold)); }
      50% { transform: translateY(-8px); filter: drop-shadow(0 0 12px var(--aura-color, gold)); }
    }

    .anim-spin { animation: spinAnim 5s linear infinite; }
    @keyframes spinAnim {
      0% { transform: rotate(0deg); filter: drop-shadow(0 0 2px var(--aura-color, gold)); }
      50% { filter: drop-shadow(0 0 12px var(--aura-color, gold)); }
      100% { transform: rotate(360deg); filter: drop-shadow(0 0 2px var(--aura-color, gold)); }
    }

    .anim-bounce { animation: bounceAnim 1.2s ease-in-out infinite; }
    @keyframes bounceAnim {
      0%, 100% { transform: translateY(0); filter: drop-shadow(0 0 2px var(--aura-color, gold)); }
      50% { transform: translateY(-10px) scale(1.05); filter: drop-shadow(0 0 12px var(--aura-color, gold)); }
    }

    .anim-shake { animation: shakeAnim 0.8s ease-in-out infinite; }
    @keyframes shakeAnim {
      0%, 100% { transform: rotate(0deg); filter: drop-shadow(0 0 2px var(--aura-color, gold)); }
      25% { transform: rotate(-15deg); filter: drop-shadow(0 0 8px var(--aura-color, gold)); }
      75% { transform: rotate(15deg); filter: drop-shadow(0 0 8px var(--aura-color, gold)); }
    }

    .anim-pulse { animation: pulseAnim 2s ease-in-out infinite; }
    @keyframes pulseAnim {
      0%, 100% { transform: scale(1); filter: drop-shadow(0 0 2px var(--aura-color, gold)); }
      50% { transform: scale(1.2); filter: drop-shadow(0 0 12px var(--aura-color, gold)); }
    }

    .anim-trident {
      font-size: 2.2rem !important;
      margin-right: 8px;
      animation: powerTrident 2s infinite ease-in-out;
    }
    @keyframes powerTrident {
      0%, 100% { transform: scale(1) translateY(0); filter: drop-shadow(0 0 2px var(--aura-color, #0b5ed7)); }
      50% { transform: scale(1.15) translateY(-5px); filter: drop-shadow(0 0 15px var(--aura-color, #0b5ed7)); }
    }

    .plane-container {
      position: relative;
      display: inline-block;
      width: 100%;
    }
    .plane-icon {
      position: absolute;
      top: -30px;
      left: 0;
      font-size: 1.5rem;
      animation: flyPlane 4s infinite linear;
      z-index: 10;
      pointer-events: none;
    }
    @keyframes flyPlane {
      0% { transform: translateX(-40px) translateY(15px) scale(0.8); opacity: 0; filter: drop-shadow(0 0 5px var(--aura-color, red)); }
      15% { opacity: 1; }
      85% { opacity: 1; }
      100% { transform: translateX(180px) translateY(-15px) scale(1.2); opacity: 0; filter: drop-shadow(0 0 15px var(--aura-color, red)); }
    }

    .arturo-cake {
      font-size: 4rem;
      display: inline-block;
      animation: floatArturo 2s infinite ease-in-out;
      position: relative;
    }
    .arturo-cake::after {
      content: '‚ú®üéâ';
      position: absolute;
      top: -15px;
      right: -30px;
      font-size: 1.5rem;
      animation: sparkle 1.5s infinite alternate ease-in-out;
    }
    @keyframes floatArturo {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }
    @keyframes sparkle {
      0% { opacity: 0.3; transform: scale(0.8) rotate(-10deg); }
      100% { opacity: 1; transform: scale(1.3) rotate(10deg); }
    }
  </style>
</head>
<body>
  <div class="modal fade" id="infoModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content text-center shadow-lg p-4">
        <button type="button" class="btn-close position-absolute top-0 end-0 m-3" data-bs-dismiss="modal" style="z-index: 10;"></button>
        
        <div class="modal-body p-0">
          <div id="modalEmojiContainer" style="font-size: 5.5rem; line-height: 1.2;"></div>
          
          <h3 id="modalTitle" class="fw-bold mt-2" style="color: #0b5ed7;"></h3>
          
          <div id="modalDetails" class="text-start mt-4 px-2" style="font-size: 1.1rem;"></div>
          
          <button type="button" class="btn btn-primary mt-4 w-100 rounded-pill" data-bs-dismiss="modal" id="modalBtn">¬°Genial! üéà</button>
        </div>
      </div>
    </div>
  </div>

  <div class="container py-5">
    <h1 class="universal-emoji">ü•≥ Cumplea√±os del Equipo CCF ü•≥</h1>
    <div id="error-box" class="alert alert-danger d-none text-center"></div>

    <h2 class="mb-3 universal-emoji">üéÅ Pr√≥ximo Cumplea√±os</h2>
    <div id="next-birthday" class="row mb-5 justify-content-center"></div>

    <h2 class="mb-3 universal-emoji">üíñ Cumplea√±os de Este Mes</h2>
    <div id="this-month" class="row g-4 mb-5"></div>

    <h2 class="mb-3 universal-emoji">üóìÔ∏è Todos los Cumplea√±os</h2>
    <div id="all-birthdays" class="row g-4"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <script>
    const birthdayData = [
      {"name": "Ricardo", "dob": "1979-02-09", "theme": "Star wars o el mar", "activity": "RT D2", "color": "Azul o verde", "song": "Tema de star wars", "photo": ""},
      {"name": "Norma Isabel Corona Vizcaino", "dob": "1982-08-19", "theme": "Fiesta, globos, banda, mariachi, folklor", "activity": "Bailar zapateado, cumbia y banda", "color": "Cafe, beige y rosa", "song": "Ma√±anitas alegres o con banda", "photo": ""},
      {"name": "Oscar Eliecer Lucio Palacio", "dob": "1987-01-01", "theme": "Calabozos y Dragones, libros de terror y fantas√≠a. Magic the gathering", "activity": "Leer, jugar Rol o magic", "color": "negro", "song": "Happy birthday de the Beatles", "photo": ""},
      {"name": "Nicol√°s Gilberto Rojas Prado", "dob": "1989-02-04", "theme": "Star War - Vikingos", "activity": "Ramstein", "color": "Negro, tinto, tonos grises", "song": "las ma√±anitas estilo pink floyd", "photo": ""},
      {"name": "Lucia Guadalupe Hern√°ndez Fierro", "dob": "1993-12-09", "theme": "Harry Potter, aviones, caballos, country girl.", "activity": "Selena gomez, Taylor Swift, Gabito Ballesteros.", "color": "Rojo y rosa", "song": "La canci√≥n que sea, menos de rock ni metal", "photo": ""},
      {"name": "Karla Fernanda Camacho Camacho", "dob": "1994-05-21", "theme": "naturaleza", "activity": "Vincent Vangoh -arte", "color": "verde", "song": "jazz , salsa, la que te guste", "photo": ""},
      {"name": "Briceyda Gonz√°lez", "dob": "1994-11-09", "theme": "Libros, mandalas, caf√©, asesinos seriales, gerberas.", "activity": "Matisse, Carin Le√≥n, Leer.", "color": "Negro, morado y lila.", "song": "ai nose (Regget√≥n viejito)", "photo": ""},
      {"name": "Jessica De Anda", "dob": "1995-03-15", "theme": "Tulipanes, mar, perritos y gatitos, cafe jaja", "activity": "Hello kitty, hacer ejercicio, tomar cafe", "color": "Aqua", "song": "reggaeton champagne jaja no es cierto, puede ser cualquiera, que sea movida", "photo": ""},
      {"name": "Daniel Amante", "dob": "1996-10-08", "theme": "Los perros, el soccer, la formula 1", "activity": "Adele o CR7", "color": "Rojo", "song": "La que se les ocurra est√° bien jaja", "photo": ""},
      {"name": "Valeria", "dob": "1997-03-05", "theme": "Harry potter", "activity": "F1, running", "color": "Negro y rosa", "song": "Nothing's gonna stop us now", "photo": ""},
      {"name": "Liz", "dob": "1999-01-22", "theme": "Amante de los atardeceres, bosque, flores, de las estrellas que me recuerdan que lo simple es lo m√°s bonito.", "activity": "Carla Morrison, Mon Laferte, Barbie en Un Cuento de Sirenas, peluches", "color": "Colores pastel, rosa, azul", "song": "Jos√© Luis Rodr√≠guez - Agradecido", "photo": ""},
      {"name": "Erika Guadalupe Cedano Navarro", "dob": "1999-07-08", "theme": "cute, flores, perritos", "activity": "spiderman, las alucines, el mariana, PEDRO PASCAL, coldplay.", "color": "colores pastel", "song": "ay no s√© pero de banda no, alguna melod√≠a chida de chava.", "photo": ""},
      {"name": "Priscila Jacqueline P√°ez Martinez", "dob": "1999-11-23", "theme": "flores, brillos", "activity": "stitch, one direction", "color": "Rojo y azul", "song": "rich girl", "photo": ""},
      {"name": "Pamela", "dob": "2025-07-08", "theme": "minimalismo", "activity": "playa, Rugrats, los guapos de F1", "color": "Morado", "song": "cualquier canci√≥n con vibe de playa", "photo": ""},
      {"name": "Arturo Joel Mart√≠nez Ponce", "dob": "1983-04-27", "theme": "general, de fiesta", "activity": "baile folcl√≥rico", "color": "azul", "song": "las ma√±anitas", "photo": ""},
      {"name": "Luis Enrique Gastelum Castro", "dob": "1996-08-15", "theme": "Super H√©roes, Futbol", "activity": "Marvel, Ricardo Arjona, Naruto Shippuden", "color": "Black, blanco, gris", "song": "devu√©lveme a mi chica - Hombre G", "photo": ""},
      {"name": "Getzemani David Albavera Soto", "dob": "1987-04-29", "theme": "naturaleza", "activity": "senderismo", "color": "negro", "song": "adventure of a lifetime", "photo": ""},
      {"name": "Jorge Luis Araya Alfaro", "dob": "1994-02-09", "theme": "Mitolog√≠a, Magia, Harry Potter, Percy Jackson", "activity": "Percy Jackson, El atardecer", "color": "Verde, azul y rojo", "song": "Make you feel My Love - Adele", "photo": ""},
      {"name": "Rebeca Sarai Palacios Torres", "dob": "1993-08-19", "theme": "Maquillaje", "activity": "", "color": "Azul marino", "song": "", "photo": ""},
      {"name": "Oscar Mart√≠n Aguilar", "dob": "1990-01-30", "theme": "", "activity": "", "color": "", "song": "", "photo": ""},
      {"name": "Karizma Mac√≠as Contreras", "dob": "2025-08-21", "theme": "", "activity": "", "color": "", "song": "", "photo": ""},
      {"name": "Arlette Alejandra Cruzado Rodr√≠guez", "dob": "2025-10-16", "theme": "", "activity": "", "color": "", "song": "", "photo": ""},
      {"name": "Vladimir Z√°rate Nava", "dob": "2025-12-28", "theme": "", "activity": "", "color": "", "song": "", "photo": ""}, 
      {"name": "Jos√© Antonio Benavides Paredes", "dob": "1995-11-05", "theme": "Animal crossing", "activity": "Tocar m√∫sica", "color": "Azul", "song": "Tota-pop de Totakeke", "photo": ""}
    ];

    function getColor(colorDesc) {
      if (!colorDesc) return 'gold';
      const desc = colorDesc.toLowerCase();
      if (desc.includes('azul')) return '#007bff';
      if (desc.includes('verde')) return '#28a745';
      if (desc.includes('rosa')) return '#e83e8c';
      if (desc.includes('rojo') || desc.includes('tinto')) return '#dc3545';
      if (desc.includes('morado') || desc.includes('lila')) return '#6f42c1';
      if (desc.includes('negro') || desc.includes('black')) return '#343a40';
      if (desc.includes('aqua')) return '#0dcaf0';
      if (desc.includes('cafe') || desc.includes('beige')) return '#8B4513';
      if (desc.includes('gris')) return '#6c757d';
      if (desc.includes('pastel')) return '#ffb6c1';
      return 'gold';
    }

    const iconConfig = {
      "Ricardo": { icon: "üöÄ", css: "anim-float" },
      "Norma Isabel Corona Vizcaino": { icon: "üé∫", css: "anim-shake" },
      "Oscar Eliecer Lucio Palacio": { icon: "üêâ", css: "anim-float" }, 
      "Nicol√°s Gilberto Rojas Prado": { icon: "ü™ì", css: "anim-shake" },
      "Lucia Guadalupe Hern√°ndez Fierro": { icon: "üêé", css: "anim-bounce" },
      "Karla Fernanda Camacho Camacho": { icon: "üåª", css: "anim-spin" },
      "Briceyda Gonz√°lez": { icon: "üî™", css: "anim-float" }, 
      "Jessica De Anda": { icon: "üê∂", css: "anim-bounce" },
      "Valeria": { icon: "‚ö°", css: "anim-pulse" },
      "Liz": { icon: "üåÖ", css: "anim-pulse" },
      "Erika Guadalupe Cedano Navarro": { icon: "üå∏", css: "anim-float" },
      "Priscila Jacqueline P√°ez Martinez": { icon: "‚ú®", css: "anim-pulse" },
      "Pamela": { icon: "üèñÔ∏è", css: "anim-float" },
      "Luis Enrique Gastelum Castro": { icon: "ü¶∏‚Äç‚ôÇÔ∏è", css: "anim-bounce" },
      "Getzemani David Albavera Soto": { icon: "üå≤", css: "anim-float" },
      "Jorge Luis Araya Alfaro": { icon: "üî±", css: "anim-trident" }, 
      "Rebeca Sarai Palacios Torres": { icon: "üíÑ", css: "anim-float" },
      "Jos√© Antonio Benavides Paredes": { icon: "üé∏", css: "anim-shake" },
      "Arturo Joel Mart√≠nez Ponce": { icon: "ü™Ö", css: "anim-pulse" } 
    };

    document.addEventListener("DOMContentLoaded", () => {
      try {
        const today = new Date();
        const currentMonth = today.getMonth();
        const currentDate = today.getDate();

        const processed = birthdayData.map(p => {
          const dob = new Date(p.dob + "T00:00:00");
          return { ...p, dob, month: dob.getMonth(), day: dob.getDate(), isToday: dob.getMonth() === currentMonth && dob.getDate() === currentDate };
        }).sort((a,b) => a.month - b.month || a.day - b.day);

        const todayBirthdays = processed.filter(p => p.isToday);
        let next = processed.find(p => p.month > currentMonth || (p.month === currentMonth && p.day >= currentDate));
        if (!next) next = processed[0];

        document.getElementById("next-birthday").innerHTML = createCard(next, true);
        const monthBirthdays = processed.filter(p => p.month === currentMonth);
        document.getElementById("this-month").innerHTML = monthBirthdays.length
          ? monthBirthdays.map(p => createCard(p)).join("")
          : "<p class='text-muted'>No hay cumplea√±os este mes.</p>";
        document.getElementById("all-birthdays").innerHTML = processed.map(p => createCard(p)).join("");

        document.querySelectorAll(".birthday-card").forEach(card => {
          card.addEventListener("click", () => {
            const person = processed.find(p => p.name === card.dataset.name);
            showInfo(person);
          });
        });

        setTimeout(() => {
          if (todayBirthdays.length > 0) {
            showCelebration(todayBirthdays[0]);
          } else {
            showNext(next);
          }
        }, 1000);
      } catch (error) {
        document.getElementById("error-box").classList.remove("d-none");
        document.getElementById("error-box").textContent = "Hubo un error cargando las tarjetas: " + error.message;
      }
    });

    function createCard(p, highlight = false) {
      const date = p.dob.toLocaleDateString("es-ES", { day: "numeric", month: "long" });
      const cleanName = p.name.trim();
      
      let cardIcon = `<span class="universal-emoji" style="font-size:4rem;">üéÇ</span>`;
      
      if (cleanName === "Arturo Joel Mart√≠nez Ponce") {
         cardIcon = `<div class="arturo-cake universal-emoji">üç∞</div>`;
      }

      let nameHTML = `<h5>${p.name}</h5>`;

      if (cleanName === "Daniel Amante") {
         const auraColor = getColor(p.color);
         nameHTML = `
           <div class="plane-container">
             <div class="plane-icon universal-emoji" style="--aura-color: ${auraColor};">‚úàÔ∏è</div>
             <h5>${p.name}</h5>
           </div>`;
      } else {
        const iconData = iconConfig[cleanName] || { icon: "üéâ", css: "anim-pulse" };
        const auraColor = getColor(p.color);
        
        nameHTML = `
           <h5>
             <span class="icon-base universal-emoji ${iconData.css}" style="--aura-color: ${auraColor};">${iconData.icon}</span>
             <span style="vertical-align: middle;">${p.name}</span>
           </h5>`;
      }

      return `
        <div class="col-md-4 col-lg-3">
          <div class="card birthday-card h-100 ${highlight ? "next-birthday-card" : ""} ${p.isToday ? "today-birthday" : ""}" data-name="${p.name}">
            <div class="text-center pt-4 pb-2">${cardIcon}</div>
            <div class="card-body text-center d-flex flex-column justify-content-center">
              ${nameHTML}
              <p class="text-muted mb-0">${date}</p>
              ${p.isToday ? '<div class="mt-2"><span class="badge bg-success">¬°ES HOY!</span></div>' : ""}
            </div>
          </div>
        </div>`;
    }

    // ----------------------------------------------------
    // FUNCI√ìN PARA REINICIAR Y DISPARAR LA ANIMACI√ìN EN CASCADA
    // ----------------------------------------------------
    function triggerModalAnimations() {
      const emoji = document.getElementById("modalEmojiContainer");
      const title = document.getElementById("modalTitle");
      const details = document.getElementById("modalDetails");
      const btn = document.getElementById("modalBtn");

      emoji.classList.remove("emoji-grow-fx");
      title.classList.remove("details-fade-fx");
      details.classList.remove("details-fade-fx");
      btn.classList.remove("details-fade-fx");

      void emoji.offsetWidth;

      emoji.classList.add("emoji-grow-fx");
      title.classList.add("details-fade-fx");
      details.classList.add("details-fade-fx");
      btn.classList.add("details-fade-fx");
    }

    function showInfo(person) {
      const cleanName = person.name.trim();
      const iconData = iconConfig[cleanName] || { icon: "üéâ", css: "anim-pulse" };
      let icon = iconData.icon;
      let auraColor = getColor(person.color);

      if (cleanName === "Daniel Amante") { icon = "‚úàÔ∏è"; }

      document.getElementById("modalTitle").textContent = person.name;
      // Quitamos la clase del movimiento normal para que crezca y se quede quieto con su aura
      document.getElementById("modalEmojiContainer").innerHTML = `
        <span class="universal-emoji" style="--aura-color: ${auraColor}; filter: drop-shadow(0 0 15px var(--aura-color));">${icon}</span>
      `;
      
      document.getElementById("modalDetails").innerHTML = `
        <p><strong>üé® Color favorito:</strong> ${person.color || 'No especificado'}</p>
        <p><strong>‚≠ê Tema:</strong> ${person.theme || 'Sorpresa'}</p>
        <p><strong>‚ù§Ô∏è Le gusta:</strong> ${person.activity || 'Pasarla bien'}</p>
        <p><strong>üéµ Canci√≥n:</strong> ${person.song || 'Cualquiera para bailar'}</p>`;
      
      triggerModalAnimations();
      
      const modalInstance = bootstrap.Modal.getOrCreateInstance(document.getElementById('infoModal'));
      modalInstance.show();
    }

    function showCelebration(person) {
      const cleanName = person.name.trim();
      const iconData = iconConfig[cleanName] || { icon: "üéà", css: "anim-pulse" };
      let icon = iconData.icon;
      let auraColor = getColor(person.color);
      
      if (cleanName === "Daniel Amante") { icon = "‚úàÔ∏è"; }

      document.getElementById("modalTitle").textContent = `¬°Feliz cumplea√±os ${person.name}!`;
      document.getElementById("modalEmojiContainer").innerHTML = `
        <span class="universal-emoji" style="--aura-color: ${auraColor}; filter: drop-shadow(0 0 15px var(--aura-color));">${icon}</span>
      `;

      document.getElementById("modalDetails").innerHTML = `
        <p><strong>üé® Color favorito:</strong> ${person.color || 'No especificado'}</p>
        <p><strong>‚≠ê Tema:</strong> ${person.theme || 'Sorpresa'}</p>
        <p><strong>‚ù§Ô∏è Le gusta:</strong> ${person.activity || 'Pasarla bien'}</p>
        <p><strong>üéµ Canci√≥n:</strong> ${person.song || 'Cualquiera para bailar'}</p>`;
      
      triggerModalAnimations();
      
      const modalInstance = bootstrap.Modal.getOrCreateInstance(document.getElementById('infoModal'));
      modalInstance.show();

      const end = Date.now() + 2 * 1000;
      (function frame() {
        if (typeof confetti !== "undefined") {
          confetti({ particleCount: 5, spread: 100, origin: { x: Math.random(), y: Math.random() - 0.2 } });
          if (Date.now() < end) requestAnimationFrame(frame);
        }
      })();
    }

    function showNext(person) {
      const cleanName = person.name.trim();
      const iconData = iconConfig[cleanName] || { icon: "üéâ", css: "anim-pulse" };
      let icon = iconData.icon;
      let auraColor = getColor(person.color);

      if (cleanName === "Daniel Amante") { icon = "‚úàÔ∏è"; }

      document.getElementById("modalTitle").textContent = "üéÅ Pr√≥ximo Cumplea√±os";
      document.getElementById("modalEmojiContainer").innerHTML = `
        <span class="universal-emoji" style="--aura-color: ${auraColor}; filter: drop-shadow(0 0 15px var(--aura-color));">${icon}</span>
      `;

      document.getElementById("modalDetails").innerHTML = `
        <h4 class="fw-bold mb-3 text-center" style="color: #333;">${person.name}</h4>
        <p><strong>üìÖ Fecha:</strong> ${person.dob.toLocaleDateString("es-ES", { day: "numeric", month: "long" })}</p>
        <p><strong>üé® Color favorito:</strong> ${person.color || 'No especificado'}</p>
        <p><strong>‚≠ê Tema:</strong> ${person.theme || 'Sorpresa'}</p>
        <p><strong>‚ù§Ô∏è Le gusta:</strong> ${person.activity || 'Pasarla bien'}</p>
        <p><strong>üéµ Canci√≥n:</strong> ${person.song || 'Cualquiera para bailar'}</p>`;
      
      triggerModalAnimations();
      
      const modalInstance = bootstrap.Modal.getOrCreateInstance(document.getElementById('infoModal'));
      modalInstance.show();
    }
  </script>
</body>
</html>
